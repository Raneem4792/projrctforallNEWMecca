# ๐ง ููุฏุงู ุชุนุฏูู ุงููุณุชุฎุฏู - User Edit Modal

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ููุฏุงู ูุงูู ูุชุนุฏูู ุจูุงูุงุช ุงููุณุชุฎุฏููู ูุนูู ูุจุงุดุฑุฉ ูุน ุฌุฏูู `users` ุจุฏูู ุฃู ุชุบููุฑุงุช ุนูู ูููู ุงูุฌุฏูู.

## ุงูููุฒุงุช ุงููุถุงูุฉ

### 1. **ููุฏุงู HTML ูุงูู** โ
- ุชุตููู ูุชุฌุงูุจ ูุน Tailwind CSS
- ุฌููุน ุงูุญููู ุงููุทููุจุฉ ูุชุนุฏูู ุงููุณุชุฎุฏู
- ุฏุนู ููุฃูุณุงู ุงููุชุนููุฉ ุจุงููุณุชุดูู
- Toast ููุฅุดุนุงุฑุงุช

### 2. **ุฌูุจ ุงูุจูุงูุงุช** โ
- `GET /api/users/:id` - ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู
- `GET /api/hospitals?active=1` - ูุงุฆูุฉ ุงููุณุชุดููุงุช ุงูููุนููุฉ
- `GET /api/departments?hospitalId=...` - ุฃูุณุงู ุงููุณุชุดูู ุงููุญุฏุฏ

### 3. **ุญูุธ ุงูุชุนุฏููุงุช** โ
- `PUT /api/users/:id` - ุญูุธ ุงูุชุนุฏููุงุช
- ุงูุญูุงุธ ุนูู ูููุฉ ุงููุฑูุฑ (PasswordHash) ุจุฏูู ุชุบููุฑ
- ุฅุนุงุฏุฉ ุชุญููู ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุจุนุฏ ุงูุญูุธ

### 4. **ุญู ูุดููุฉ ุงููููุฐ** โ
- ุฏุนู ุชููุงุฆู ูููููุฐูู 5500 ู 3001
- `API_BASE` ูุชููู ุชููุงุฆูุงู ุญุณุจ ุงููููุฐ ุงูุญุงูู

## ุงูุญููู ุงููุชุงุญุฉ ูู ุงูููุฏุงู

| ุงูุญูู | ุงูููุน | ูุทููุจ | ุงููุตู |
|--------|-------|--------|--------|
| `ue_FullName` | text | โ | ุงูุงุณู ุงููุงูู |
| `ue_Username` | text | โ | ุงุณู ุงููุณุชุฎุฏู |
| `ue_Email` | email | โ | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| `ue_Mobile` | text | โ | ุฑูู ุงูุฌูุงู |
| `ue_NationalID` | text | โ | ุงููููุฉ ุงููุทููุฉ |
| `ue_RoleID` | select | โ | ุงูุฏูุฑ (1-4) |
| `ue_HospitalID` | select | โ | ุงููุณุชุดูู |
| `ue_DepartmentID` | select | โ | ุงููุณู |
| `ue_IsActive` | checkbox | โ | ุญุงูุฉ ุงูุชูุนูู |

## ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ

```javascript
<option value="1">ุณูุจุฑ ุฃุฏูู</option>
<option value="2">ููุธู</option>
<option value="3">ูุฏูุฑ ูุณู</option>
<option value="4">ูุฏูุฑ</option>
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. **ูุชุญ ุงูููุฏุงู**
```javascript
// ูุชู ุงุณุชุฏุนุงุคูุง ุชููุงุฆูุงู ุนูุฏ ุงูููุฑ ุนูู ุฒุฑ ุงูุชุนุฏูู
openUserEdit(userId);
```

### 2. **ุชุนุจุฆุฉ ุงูุจูุงูุงุช**
- ูุชู ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ูู API
- ุชุนุจุฆุฉ ูุงุฆูุฉ ุงููุณุชุดููุงุช ุงูููุนููุฉ
- ุชุนุจุฆุฉ ุฃูุณุงู ุงููุณุชุดูู ุงููุญุฏุฏ
- ููุก ุฌููุน ุงูุญููู ุจุงูุจูุงูุงุช ุงูุญุงููุฉ

### 3. **ุญูุธ ุงูุชุนุฏููุงุช**
```javascript
// ูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุฅุฑุณุงู ุงููููุฐุฌ
saveUserEdit(event);
```

## API Endpoints ุงููุณุชุฎุฏูุฉ

### ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู
```
GET /api/users/:id
```
**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "UserID": 1,
  "RoleID": 2,
  "HospitalID": 1,
  "DepartmentID": 3,
  "FullName": "ุฃุญูุฏ ุงูุนุชูุจู",
  "Username": "ahmed",
  "Email": "ahmed@example.com",
  "Mobile": "0550000001",
  "NationalID": "1234567890",
  "PasswordHash": "hashed-password",
  "IsActive": 1
}
```

### ุฌูุจ ุงููุณุชุดููุงุช ุงูููุนููุฉ
```
GET /api/hospitals?active=1
```

### ุฌูุจ ุฃูุณุงู ุงููุณุชุดูู
```
GET /api/departments?hospitalId=1
```

### ุญูุธ ุงูุชุนุฏููุงุช
```
PUT /api/users/:id
```
**ุงูุจูุงูุงุช ุงููุฑุณูุฉ:**
```json
{
  "RoleID": 2,
  "HospitalID": 1,
  "DepartmentID": 3,
  "FullName": "ุฃุญูุฏ ุงูุนุชูุจู",
  "Username": "ahmed",
  "Email": "ahmed@example.com",
  "Mobile": "0550000001",
  "NationalID": "1234567890",
  "PasswordHash": "hashed-password",
  "IsActive": 1
}
```

## ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. **ุชุญุฏูุซ ุงูุฃูุณุงู ุชููุงุฆูุงู**
ุนูุฏ ุชุบููุฑ ุงููุณุชุดููุ ูุชู ุชุญุฏูุซ ูุงุฆูุฉ ุงูุฃูุณุงู ุชููุงุฆูุงู:
```javascript
ue_HospitalID.addEventListener('change', ()=>{
  fillDepartmentsSelect(ue_HospitalID.value, null);
});
```

### 2. **ุงูุญูุงุธ ุนูู ูููุฉ ุงููุฑูุฑ**
```javascript
PasswordHash: ue_PasswordHash.value || null, // ูุง ูุบููุฑูุงุ ูุนูุฏ ููุณ ุงููููุฉ
```

### 3. **ุฏุนู ESC ูุฅุบูุงู ุงูููุฏุงู**
```javascript
document.addEventListener('keydown', e => {
  if (e.key === 'Escape' && !userEditModal.classList.contains('hidden')) closeUserEdit();
});
```

### 4. **Toast ููุฅุดุนุงุฑุงุช**
```javascript
function showUeToast(msg='ุชู ุญูุธ ุงูุชุนุฏููุงุช'){
  ueToast.textContent = msg;
  ueToast.classList.remove('hidden');
  setTimeout(()=> ueToast.classList.add('hidden'), 1600);
}
```

## ุงุฎุชุจุงุฑ ุงูููุฏุงู

### 1. **ุชุดุบูู ุงูุฎุงุฏู**
```bash
cd backend
npm start
```

### 2. **ูุชุญ ุงูุตูุญุฉ**
```
http://localhost:5500/admin-users.html
# ุฃู
http://localhost:3001/admin-users.html
```

### 3. **ุงุฎุชุจุงุฑ ุงูููุฏุงู**
1. ุงุฎุชุฑ ูุณุชุดูู ูู ุงููุงุฆูุฉ
2. ุงููุฑ ุนูู "ุชุนุฏูู" ูุฃู ูุณุชุฎุฏู
3. ุนุฏูู ุงูุจูุงูุงุช ูู ุงูููุฏุงู
4. ุงุญูุธ ุงูุชุนุฏููุงุช
5. ุชุญูู ูู ุชุญุฏูุซ ุงููุงุฆูุฉ

## ููุงุญุธุงุช ูููุฉ

### 1. **ูููุฉ ุงููุฑูุฑ**
- ุงูููุฏุงู ูุง ูุบููุฑ ูููุฉ ุงููุฑูุฑ
- ูุชู ุงูุญูุงุธ ุนูู `PasswordHash` ููุง ูู
- ูุชุบููุฑ ูููุฉ ุงููุฑูุฑุ ุงุณุชุฎุฏู ููุฏุงู ูููุตู

### 2. **ุงูุฃูุณุงู**
- ุงูุฃูุณุงู ุชุชุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุชุบููุฑ ุงููุณุชุดูู
- ุฅุฐุง ูู ุชูู ููุงู ุฃูุณุงูุ ูุธูุฑ "โ ุจุฏูู ูุณู โ"

### 3. **ุงูุชุญูู ูู ุงูุจูุงูุงุช**
- ุงูุงุณู ุงููุงูู ูุทููุจ
- ุงุณู ุงููุณุชุฎุฏู ูุทููุจ  
- ุงููุณุชุดูู ูุทููุจ

### 4. **ุงูุฃุฏุงุก**
- ุงูููุฏุงู ูุญููู ุงูุจูุงูุงุช ุนูุฏ ุงููุชุญ ููุท
- ูุง ูุชู ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช ุนูุฏ ุฅุบูุงู ุงูููุฏุงู

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ุงูููุฏุงู ูุง ููุชุญ
**ุงูุญู:** ุชุฃูุฏ ูู ุฃู `openUserEdit` function ููุฌูุฏุฉ ููุณุชุฏุนุงุฉ ุจุดูู ุตุญูุญ

### ูุดููุฉ: ูุง ุชุธูุฑ ุงููุณุชุดููุงุช
**ุงูุญู:** ุชุญูู ูู ุฃู `/api/hospitals?active=1` ูุนูู

### ูุดููุฉ: ูุง ุชุธูุฑ ุงูุฃูุณุงู
**ุงูุญู:** ุชุญูู ูู ุฃู `/api/departments?hospitalId=...` ูุนูู

### ูุดููุฉ: ูุง ูุชู ุญูุธ ุงูุชุนุฏููุงุช
**ุงูุญู:** ุชุญูู ูู ุฃู `/api/users/:id` PUT endpoint ูุนูู

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### 1. **ุชุบููุฑ ูููุฉ ุงููุฑูุฑ**
```javascript
// ุฅุถุงูุฉ ููุฏุงู ูููุตู ูุชุบููุฑ ูููุฉ ุงููุฑูุฑ
window.changePassword = function(userId) {
  // ููุฏุงู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
};
```

### 2. **ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ**
```javascript
// ุฅุถุงูุฉ ููุฏุงู ูุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
window.addNewUser = function() {
  // ููุฏุงู ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
};
```

### 3. **ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช**
```javascript
// ุฅุถุงูุฉ ุชุญูู ุฃูุซุฑ ุชูุตููุงู
function validateUserData(data) {
  // ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
}
```

ุงูุขู ููุฏุงู ุชุนุฏูู ุงููุณุชุฎุฏู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐
