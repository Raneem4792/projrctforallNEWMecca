-- =====================================================
-- إضافة صلاحية HOSPITAL_CREATE
-- =====================================================
-- هذا السكريبت يضيف صلاحية "إضافة مستشفى" للنظام
-- تُستخدم للتحكم في من يستطيع إنشاء مستشفيات جديدة
-- =====================================================

USE makkah_central;

-- إضافة الصلاحية في جدول permissions المركزي
INSERT IGNORE INTO permissions (PermissionKey, NameAr, NameEn, Category, Description)
VALUES (
  'HOSPITAL_CREATE',
  'إضافة مستشفى',
  'Create Hospital',
  'cluster',
  'صلاحية إنشاء مستشفيات جديدة في التجمع'
);

-- =====================================================
-- ملاحظات:
-- =====================================================
-- 1. هذه الصلاحية تُحفظ في جدول user_permissions لكل مستشفى
-- 2. مدير التجمع (Central Admin) له الصلاحية تلقائياً
-- 3. باقي المستخدمين يحتاجون منحها من صفحة الصلاحيات
-- 4. يمكن منحها لمدير المستشفى أو حتى موظف عادي
-- 
-- مثال لمنح الصلاحية يدوياً:
-- 
-- USE hosp_ABC;  -- قاعدة المستشفى
-- INSERT INTO user_permissions (UserID, HospitalID, PermissionKey)
-- VALUES (123, 1, 'HOSPITAL_CREATE');
-- 
-- =====================================================

-- التحقق من إضافة الصلاحية
SELECT * FROM permissions WHERE PermissionKey = 'HOSPITAL_CREATE';

