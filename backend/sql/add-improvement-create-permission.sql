-- =====================================================
-- إضافة صلاحية إنشاء المشاريع التحسينية
-- =====================================================
-- هذا السكريبت يضيف صلاحية IMPROVEMENT_CREATE للمشاريع التحسينية
-- =====================================================

USE makkah_central;

-- إضافة الصلاحية في جدول permissions المركزي
INSERT IGNORE INTO permissions (PermissionKey, NameAr, NameEn, Category, Description) VALUES
('IMPROVEMENT_CREATE', 'إنشاء مشاريع تحسينية', 'Create Improvement Projects', 'improvement', 'إنشاء وإدارة المشاريع التحسينية بناءً على تكرار البلاغات');

-- =====================================================
-- ملاحظات:
-- =====================================================
-- 1. هذه الصلاحية تُحفظ في جدول user_permissions لكل مستشفى
-- 2. مدير التجمع (Central Admin) له جميع الصلاحيات تلقائياً
-- 3. باقي المستخدمين يحتاجون منحها من صفحة الصلاحيات
-- 4. هذه الصلاحية تتحكم في إظهار زر "مشروع تحسيني" في الداشبورد
-- 5. الزر يظهر تلقائياً عند تكرار البلاغات ≥ 3 في نفس القسم
