<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;800&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../assets/css/styles.css" />
</head>

<body class="bg-gray-50" style="font-family: 'Tajawal', sans-serif">

  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header id="navbar" class="fixed w-full top-0 z-50 navbar-scroll" style="background-color: #002B5B;">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <img src="../assets/img/logo3.png" alt="Ø´Ø¹Ø§Ø± ØªØ¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø© Ø§Ù„ØµØ­ÙŠ" class="h-16 w-auto" />
        </div>
        <nav class="hidden md:flex items-center space-x-reverse space-x-8">
          <a href="../../index/landing.html" id="nav-home" class="text-white hover:text-blue-200 transition-colors">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
          <a href="../../index/landing.html#features" id="nav-features" class="text-white hover:text-blue-200 transition-colors">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
          <a href="../../index/landing.html#contact" id="nav-contact" class="text-white hover:text-blue-200 transition-colors">ØªÙˆØ§ØµÙ„</a>
          <button id="languageToggle" class="text-white hover:text-blue-200 transition-colors flex items-center">
            ğŸŒ English
          </button>
        </nav>
      </div>
    </div>
  </header>

  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
  <main class="flex items-center justify-center min-h-screen px-4 pt-24 pb-10">
    <div class="w-full max-w-md bg-white rounded-2xl shadow-lg border border-gray-100 p-8">

      <div class="text-center mb-8">
        <h1 id="page-title" class="text-2xl font-extrabold text-[#002B5B] mb-2">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h1>
        <p id="page-subtitle" class="text-gray-600">Ø³Ø¬Ù‘Ù„ Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</p>
      </div>

      <form id="signupForm" class="space-y-5" novalidate>
        <!-- Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ -->
        <div>
          <label id="full-name-label" class="block mb-1 font-semibold text-gray-700">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
          <input type="text" id="fullName" required placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„"
                 class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]" 
                 data-placeholder-ar="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" data-placeholder-en="Enter your full name" />
        </div>

        <!-- Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <div>
          <label id="username-label" class="block mb-1 font-semibold text-gray-700">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
          <input type="text" id="username" required placeholder="Ø§Ø®ØªØ± Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù…"
                 class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]" 
                 data-placeholder-ar="Ø§Ø®ØªØ± Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù…" data-placeholder-en="Choose a username" />
        </div>

        <!-- Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ -->
        <div>
          <label id="mobile-label" class="block mb-1 font-semibold text-gray-700">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
          <input type="tel" id="mobile" required placeholder="05XXXXXXXX"
                 class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]" 
                 data-placeholder-ar="05XXXXXXXX" data-placeholder-en="05XXXXXXXX" />
        </div>

        <!-- Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© -->
        <div>
          <label id="national-id-label" class="block mb-1 font-semibold text-gray-700">Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</label>
          <input type="text" id="nationalId" maxlength="10" required placeholder="10 Ø£Ø±Ù‚Ø§Ù…"
                 class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]" 
                 data-placeholder-ar="10 Ø£Ø±Ù‚Ø§Ù…" data-placeholder-en="10 digits" />
        </div>

        <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ -->
        <div>
          <label id="hospital-label" class="block mb-1 font-semibold text-gray-700">Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</label>
          <select id="hospitalId" required
                  class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]">
            <option value="" disabled selected id="hospital-placeholder">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</option>
          </select>
        </div>

        <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div>
          <label id="main-department-label" class="block mb-1 font-semibold text-gray-700">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
          <select id="mainDept" required
                  class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]">
            <option value="" disabled selected id="main-dept-placeholder">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</option>
          </select>
        </div>

        <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ -->
        <div>
          <label id="sub-department-label" class="block mb-1 font-semibold text-gray-700">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <select id="subDept" disabled
                  class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B] bg-gray-100">
            <option value="" disabled selected id="sub-dept-placeholder">Ø§Ø®ØªØ± Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</option>
          </select>
        </div>

        <!-- Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ -->
        <div>
          <label id="email-label" class="block mb-1 font-semibold text-gray-700">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
          <input type="email" id="email" required placeholder="example@email.com"
                 class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]" 
                 data-placeholder-ar="example@email.com" data-placeholder-en="example@email.com" />
        </div>

        <!-- ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
        <div>
          <label id="password-label" class="block mb-1 font-semibold text-gray-700">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
          <input type="password" id="password" required placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©"
                 class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]" 
                 data-placeholder-ar="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©" data-placeholder-en="Strong password" />
        </div>

        <!-- ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
        <div>
          <label id="confirm-password-label" class="block mb-1 font-semibold text-gray-700">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
          <input type="password" id="confirmPassword" required placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                 class="w-full rounded-xl border-gray-300 focus:ring-[#002B5B] focus:border-[#002B5B]" 
                 data-placeholder-ar="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" data-placeholder-en="Re-enter password" />
          <p id="errorText" class="text-red-600 text-sm hidden mt-1">ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†</p>
        </div>

        <!-- Ø²Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ -->
        <button type="submit" id="signup-btn"
                class="w-full py-3 rounded-xl bg-[#002B5B] hover:bg-[#013b7a] text-white font-semibold shadow-md transition">
          Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
        </button>

        <p class="text-center text-sm text-gray-600 mt-3">
          <span id="login-question">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ</span> 
          <a href="login.html" id="login-link" class="text-[#002B5B] font-semibold hover:underline">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</a>
        </p>
      </form>
    </div>
  </main>

  <!-- Footer - Ø§Ù„ØªØ°ÙŠÙŠÙ„ -->
  <footer class="bg-gray-900 text-white py-14">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-8">
        <!-- Column 1 - Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙˆÙ„ -->
        <div>
          <div class="flex items-center space-x-reverse space-x-3 mb-4">
            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
              <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
              </svg>
            </div>
            <div>
              <div id="footer-org-name" class="font-bold">ØªØ¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„ØµØ­ÙŠ</div>
              <div id="footer-system-name" class="text-sm text-gray-300">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</div>
            </div>
          </div>
          <p id="footer-description" class="text-gray-300 text-sm">Ù…Ù†ØµØ© Ø±Ø³Ù…ÙŠØ© Ù„ØªÙ‚Ø¯ÙŠÙ… ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</p>
        </div>

        <!-- Column 2 - Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø«Ø§Ù†ÙŠ -->
        <div>
          <h3 id="footer-links-title" class="font-bold mb-4">Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="../../index/index.html" id="footer-link-home" class="text-gray-300 hover:text-white hover:underline transition-colors">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
            <li><a href="../complaints/submit/submit-complaint.html" id="footer-link-submit" class="text-gray-300 hover:text-white hover:underline transition-colors">ØªÙ‚Ø¯ÙŠÙ… Ø¨Ù„Ø§Øº</a></li>
            <li><a href="../complaints/track/track-complaint.html" id="footer-link-track" class="text-gray-300 hover:text-white hover:underline transition-colors">Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ù„Ø§Øº</a></li>
            <li><a href="../../index/help.html" id="footer-link-faq" class="text-gray-300 hover:text-white hover:underline transition-colors">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</a></li>
          </ul>
        </div>

        <!-- Column 3 - Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø«Ø§Ù„Ø« -->
        <div>
          <h3 id="footer-contact-title" class="font-bold mb-4">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
          <div class="space-y-2 text-sm text-gray-300">
            <div class="flex items-baseline">
              <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              <span id="footer-support-number">Ø±Ù‚Ù… Ø§Ù„Ø¯Ø¹Ù…: 0559735137</span>
            </div>
            <div class="flex items-baseline">
              <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              <span id="footer-support-number-2">Ø±Ù‚Ù… Ø§Ù„Ø¯Ø¹Ù…: 0542282550</span>
            </div>
            <div class="flex items-baseline">
              <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              <span id="footer-support-email">support@makkahhealth.gov.sa</span>
            </div>
            <div class="flex items-baseline">
              <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <span id="footer-working-hours">Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: 24/7</span>
            </div>
          </div>
        </div>
      </div>

      <div class="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-300">
        <span id="footer-copyright">Â© 2025 ØªØ¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø© Ø§Ù„ØµØ­ÙŠ â€“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</span>
      </div>
    </div>
  </footer>

  <!-- Ù…ÙƒØ§Ù† Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ³Øª -->
  <div id="toast-root" class="fixed top-4 right-4 z-[9999] space-y-3 pointer-events-none"></div>

  <!-- Ø¯Ø§Ù„Ø© Toast -->
  <script>
    function showToast({ title = '', message = '', type = 'success', duration = 3000 } = {}) {
      const root = document.getElementById('toast-root');
      if (!root) return;

      const colors = {
        success: { bg: 'bg-green-600', ring: 'ring-green-500/30', icon: 'âœ…' },
        error:   { bg: 'bg-red-600',   ring: 'ring-red-500/30',   icon: 'âŒ' },
        warning: { bg: 'bg-yellow-600',ring: 'ring-yellow-500/30',icon: 'âš ï¸' },
        info:    { bg: 'bg-blue-600',  ring: 'ring-blue-500/30',  icon: 'â„¹ï¸' }
      }[type] || { bg: 'bg-slate-700', ring: 'ring-slate-500/30', icon: 'â„¹ï¸' };

      const el = document.createElement('div');
      el.className =
        `pointer-events-auto ${colors.bg} text-white shadow-xl ring-1 ${colors.ring} rounded-xl px-4 py-3 w-[320px]
         translate-y-2 opacity-0 transition-all duration-300 flex items-start gap-3`;
      el.setAttribute('role', 'status');
      el.innerHTML = `
        <div class="text-xl leading-none mt-0.5">${colors.icon}</div>
        <div class="flex-1">
          <div class="font-semibold">${title}</div>
          ${message ? `<div class="text-white/90 text-sm mt-0.5">${message}</div>` : ''}
        </div>
        <button class="ml-2 text-white/80 hover:text-white transition" aria-label="Ø¥ØºÙ„Ø§Ù‚">âœ•</button>
      `;

      const close = () => {
        el.classList.add('opacity-0', 'translate-y-2');
        setTimeout(() => el.remove(), 250);
      };
      el.querySelector('button').onclick = close;

      root.appendChild(el);
      // Ø§Ø¯Ø®Ø§Ù„ Ø£Ù†ÙŠÙ…ÙŠØ´Ù€Ù†
      requestAnimationFrame(() => el.classList.remove('opacity-0', 'translate-y-2'));
      // Ø¥Ø²Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
      setTimeout(close, duration);
    }
  </script>

  <!-- Ø³ÙƒØ±Ø¨Øª Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ø¨Ø§Ùƒ-Ø¥Ù†Ø¯ -->
  <script>
    const API_BASE = 'http://localhost:3001/api';

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª
    async function loadHospitals() {
      try {
        const response = await fetch(`${API_BASE}/hospitals`);
        
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }
        
        const hospitals = await response.json();
        
        // API ÙŠØ±Ø¬Ø¹ array Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ù„ÙŠØ³ object Ù…Ø¹ success
        if (!Array.isArray(hospitals)) {
          console.error('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª: ØªÙ†Ø³ÙŠÙ‚ ØºÙŠØ± ØµØ­ÙŠØ­');
          return;
        }

        const hospitalSelect = document.getElementById('hospitalId');
        if (!hospitalSelect) return;

        hospitalSelect.innerHTML = '<option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</option>';
        
        hospitals.forEach(hospital => {
          const option = document.createElement('option');
          option.value = hospital.HospitalID;
          option.textContent = hospital.NameAr || hospital.NameEn;
          hospitalSelect.appendChild(option);
        });
        
        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${hospitals.length} Ù…Ø³ØªØ´ÙÙ‰ Ø¨Ù†Ø¬Ø§Ø­`);
      } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª:', error);
        showToast({ 
          title: 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª', 
          message: 'ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø§Ùƒ-Ø¥Ù†Ø¯', 
          type: 'error',
          duration: 4000
        });
      }
    }

    // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
    function fillSelect(select, items, {withEmpty=true, text='label', value='value'} = {}) {
      if (!select) return;
      select.innerHTML = withEmpty ? '<option value="" disabled selected>Ø§Ø®ØªØ±</option>' : '';
      items.forEach(it => {
        const opt = document.createElement('option');
        opt.value = it[value];
        opt.textContent = it[text];
        select.appendChild(opt);
      });
    }

    function resetDepts() {
      const mainSelect = document.getElementById('mainDept');
      const subSelect = document.getElementById('subDept');
      
      if (mainSelect) {
        mainSelect.innerHTML = '<option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø£ÙˆÙ„Ø§Ù‹</option>';
        mainSelect.disabled = true;
      }
      if (subSelect) {
        subSelect.innerHTML = '<option value="" disabled selected>Ø§Ø®ØªØ± Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</option>';
        subSelect.disabled = true;
        subSelect.classList.add('bg-gray-100');
      }
    }

    // ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ø®ØªØ§Ø± (Ø±Ø¦ÙŠØ³ÙŠØ© + ÙØ±Ø¹ÙŠØ©) ÙÙŠ Ø¶Ø±Ø¨Ø© ÙˆØ§Ø­Ø¯Ø©
    async function loadDepartmentsForHospital(hospitalId) {
      if (!hospitalId) { 
        resetDepts(); 
        return; 
      }

      try {
        const url = `${API_BASE}/departments/public?hospitalId=${hospitalId}`;
        const res = await fetch(url);
        
        if (!res.ok) throw new Error('HTTP ' + res.status);
        
        const result = await res.json();
        if (!result.success) {
          throw new Error(result.message || 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…');
        }

        const rows = result.data || [];
        
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØµÙŠØºØ© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©
        const departments = rows.map(d => ({
          id: d.DepartmentID,
          nameAr: d.NameAr,
          nameEn: d.NameEn,
          parentId: d.ParentDepartmentID
        }));

        // Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© = parentId NULL Ø£Ùˆ 0
        const mains = departments
          .filter(d => !d.parentId || d.parentId === 0)
          .map(d => ({ value: d.id, label: d.nameAr }));
        
        const mainSelect = document.getElementById('mainDept');
        const subSelect = document.getElementById('subDept');
        
        fillSelect(mainSelect, mains, {withEmpty: true});
        if (mainSelect) {
          mainSelect.disabled = false;
          mainSelect.querySelector('option').textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ';
        }

        // Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø±Ø¦ÙŠØ³ÙŠØŒ Ù†Ø¹Ø¨ÙŠ Ø§Ù„ÙØ±Ø¹ÙŠ Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…ØµÙÙˆÙØ©
        if (mainSelect) {
          mainSelect.onchange = () => {
            const parentId = Number(mainSelect.value || 0);
            const children = departments
              .filter(d => Number(d.parentId) === parentId)
              .map(d => ({ value: d.id, label: d.nameAr }));
            
            fillSelect(subSelect, children, {withEmpty: true});
            if (subSelect) {
              subSelect.querySelector('option').textContent = 'Ø§Ø®ØªØ± Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)';
              subSelect.disabled = children.length === 0;
              if (children.length === 0) {
                subSelect.classList.add('bg-gray-100');
              } else {
                subSelect.classList.remove('bg-gray-100');
              }
            }
          };
        }

        // Ø£ÙˆÙ‘Ù„ Ù…Ø±Ø©: ÙØ±Ù‘Øº Ø§Ù„ÙØ±Ø¹ÙŠ
        if (subSelect) {
          subSelect.disabled = true;
          subSelect.classList.add('bg-gray-100');
          subSelect.innerHTML = '<option value="" disabled selected>Ø§Ø®ØªØ± Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</option>';
        }

      } catch (e) {
        console.error('Ø®Ø·Ø£ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…:', e);
        resetDepts();
        showToast({ 
          title: 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…', 
          message: 'ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø§Ùƒ-Ø¥Ù†Ø¯ ÙˆØªÙˆÙØ± CORS', 
          type: 'error',
          duration: 4000
        });
      }
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    async function handleSignup(e) {
      e.preventDefault();

      const form = document.getElementById("signupForm");
      const pass = document.getElementById("password");
      const confirm = document.getElementById("confirmPassword");
      const errorText = document.getElementById("errorText");

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø§Ø¨Ù‚ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
      if (pass.value !== confirm.value) {
        errorText.classList.remove("hidden");
        return;
      } else {
        errorText.classList.add("hidden");
      }

      // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„Ø£Ù‚Ø³Ø§Ù…
      const mainVal = Number(document.getElementById('mainDept')?.value) || null;
      
      const subEl = document.getElementById('subDept');
      const subVal = (subEl && !subEl.disabled && subEl.value) ? Number(subEl.value) : null;

      const payload = {
        hospitalId: Number(document.getElementById('hospitalId')?.value),
        fullName: document.getElementById('fullName')?.value.trim(),
        username: document.getElementById('username')?.value.trim(),
        mobile: document.getElementById('mobile')?.value.trim() || null,
        nationalId: document.getElementById('nationalId')?.value.trim() || null,
        email: document.getElementById('email')?.value.trim() || null,
        password: document.getElementById('password')?.value,
        departmentId: mainVal,
        // Ø£Ø±Ø³Ù„ SubDepartmentID ÙÙ‚Ø· Ø¥Ø°Ø§ ÙÙŠÙ‡ Ù‚ÙŠÙ…Ø©
        ...(subVal ? { subDepartmentId: subVal } : {})
      };

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
      if (!payload.fullName || !payload.username || !payload.hospitalId || !payload.password) {
        alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
        return;
      }

      const submitBtn = document.getElementById('signup-btn');
      const originalText = submitBtn?.textContent;
      
      if (submitBtn) {
        submitBtn.disabled = true;
        submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...';
      }

      try {
        const response = await fetch(`${API_BASE}/auth/register`, {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json' 
          },
          body: JSON.stringify(payload)
        });

        const result = await response.json();

        if (response.ok && result.success) {
          showToast({ 
            title: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­', 
            message: 'ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', 
            type: 'success',
            duration: 3000
          });
          
          // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
          setTimeout(() => {
            window.location.href = 'login.html';
          }, 2000);
        } else {
          // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ù…Ø­Ø¯Ø¯Ø©
          if (response.status === 409) {
            showToast({ 
              title: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³ØªØ®Ø¯Ù…', 
              message: result.message, 
              type: 'error',
              duration: 4000
            });
          } else if (response.status === 400) {
            showToast({ 
              title: 'Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 
              message: result.message, 
              type: 'error',
              duration: 4000
            });
          } else {
            showToast({ 
              title: 'ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨', 
              message: result.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹', 
              type: 'error',
              duration: 4000
            });
          }
          return;
        }
      } catch (error) {
        if (error.message.includes('Failed to fetch')) {
          showToast({ 
            title: 'Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…', 
            message: 'ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø§Ùƒ-Ø¥Ù†Ø¯', 
            type: 'error',
            duration: 4000
          });
        } else {
          showToast({ 
            title: 'Ø®Ø·Ø£', 
            message: error.message, 
            type: 'error',
            duration: 4000
          });
        }
      } finally {
        if (submitBtn) {
          submitBtn.disabled = false;
          submitBtn.textContent = originalText || 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨';
        }
      }
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', () => {
      // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª
      loadHospitals();
      
      // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Ù…Ø¹Ø·Ù„Ø© Ø­ØªÙ‰ ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªØ´ÙÙ‰)
      resetDepts();

      // Ø±Ø¨Ø· Ø­Ø¯Ø« ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ â‡’ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
      const hospitalSelect = document.getElementById('hospitalId');
      if (hospitalSelect) {
        hospitalSelect.addEventListener('change', (e) => {
          const hospitalId = Number(e.target.value);
          loadDepartmentsForHospital(hospitalId);
        });
      }

      // Ø±Ø¨Ø· Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
      const form = document.getElementById('signupForm');
      if (form) {
        form.addEventListener('submit', handleSignup);
      }

      // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ API
      testAPIConnection();
    });

    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ API
    async function testAPIConnection() {
      try {
        const response = await fetch(`${API_BASE}/health`);
        const result = await response.json();
        console.log('âœ… API Ù…ØªØ§Ø­:', result.message);
        return true;
      } catch (error) {
        console.error('âŒ API ØºÙŠØ± Ù…ØªØ§Ø­:', error);
        // Ù„Ø§ Ù†Ø¹Ø±Ø¶ ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø²Ø¹Ø¬ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        return false;
      }
    }

    // ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‡ÙŠØ¯Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
    window.addEventListener("scroll", () => {
      const navbar = document.getElementById("navbar");
      const links = navbar.querySelectorAll("a");
      if (window.scrollY > 50) {
        navbar.style.backgroundColor = "#ffffff";
        navbar.classList.add("shadow-md");
        links.forEach(a => {
          a.classList.remove("text-white", "hover:text-blue-200");
          a.classList.add("text-[#002B5B]", "hover:text-blue-700");
        });
      } else {
        navbar.style.backgroundColor = "#002B5B";
        navbar.classList.remove("shadow-md");
        links.forEach(a => {
          a.classList.add("text-white", "hover:text-blue-200");
          a.classList.remove("text-[#002B5B]", "hover:text-blue-700");
        });
      }
    });
  </script>

  <!-- Translation System - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±Ø¬Ù…Ø© -->
  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¬Ù…Ø©
    const translations = {
      ar: {
        // Ø§Ù„Ù‡ÙŠØ¯Ø±
        'nav-home': 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
        'nav-features': 'Ø§Ù„Ø®Ø¯Ù…Ø§Øª',
        'nav-contact': 'ØªÙˆØ§ØµÙ„',
        'language-button': 'ğŸŒ English',
        
        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        'page-title': 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯',
        'page-subtitle': 'Ø³Ø¬Ù‘Ù„ Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª',
        
        // Ø§Ù„Ø­Ù‚ÙˆÙ„
        'full-name-label': 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„',
        'username-label': 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
        'mobile-label': 'Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„',
        'national-id-label': 'Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©',
        'hospital-label': 'Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰',
        'main-department-label': 'Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ',
        'sub-department-label': 'Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)',
        'email-label': 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
        'password-label': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
        'confirm-password-label': 'ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
        
        // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù‚Ø³Ù…
        'main-dept-placeholder': 'Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ',
        'sub-dept-placeholder': 'Ø§Ø®ØªØ± Ù‚Ø³Ù… ÙØ±Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)',
        
        // Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù†ØµÙˆØµ
        'signup-btn': 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨',
        'login-question': 'Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ',
        'login-link': 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„',
        
        // Ø§Ù„ÙÙˆØªÙŠØ±
        'footer-org-name': 'ØªØ¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„ØµØ­ÙŠ',
        'footer-system-name': 'Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª',
        'footer-description': 'Ù…Ù†ØµØ© Ø±Ø³Ù…ÙŠØ© Ù„ØªÙ‚Ø¯ÙŠÙ… ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª',
        'footer-links-title': 'Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©',
        'footer-link-home': 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
        'footer-link-submit': 'ØªÙ‚Ø¯ÙŠÙ… Ø¨Ù„Ø§Øº',
        'footer-link-track': 'Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ù„Ø§Øº',
        'footer-link-faq': 'Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©',
        'footer-contact-title': 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„',
        'footer-support-number': 'Ø±Ù‚Ù… Ø§Ù„Ø¯Ø¹Ù…: 0559735137',
        'footer-support-number-2': 'Ø±Ù‚Ù… Ø§Ù„Ø¯Ø¹Ù…: 0542282550',
        'footer-support-email': 'support@makkahhealth.gov.sa',
        'footer-working-hours': 'Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: 24/7',
        'footer-copyright': 'Â© 2025 ØªØ¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø© Ø§Ù„ØµØ­ÙŠ â€“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©'
      },
      en: {
        // Ø§Ù„Ù‡ÙŠØ¯Ø±
        'nav-home': 'Home',
        'nav-features': 'Services',
        'nav-contact': 'Contact',
        'language-button': 'ğŸŒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
        
        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        'page-title': 'Create New Account',
        'page-subtitle': 'Register your account to access the complaint system',
        
        // Ø§Ù„Ø­Ù‚ÙˆÙ„
        'full-name-label': 'Full Name',
        'username-label': 'Username',
        'mobile-label': 'Mobile Number',
        'national-id-label': 'National ID',
        'hospital-label': 'Hospital',
        'main-department-label': 'Main Department',
        'sub-department-label': 'Sub Department (Optional)',
        'email-label': 'Email Address',
        'password-label': 'Password',
        'confirm-password-label': 'Confirm Password',
        
        // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù‚Ø³Ù…
        'main-dept-placeholder': 'Select Main Department',
        'sub-dept-placeholder': 'Select Sub Department (Optional)',
        
        // Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù†ØµÙˆØµ
        'signup-btn': 'Create Account',
        'login-question': 'Already have an account?',
        'login-link': 'Sign In',
        
        // Ø§Ù„ÙÙˆØªÙŠØ±
        'footer-org-name': 'Makkah Health Cluster',
        'footer-system-name': 'Complaint System',
        'footer-description': 'Official platform for filing and tracking complaints',
        'footer-links-title': 'Quick Links',
        'footer-link-home': 'Home',
        'footer-link-submit': 'Submit Complaint',
        'footer-link-track': 'Track Complaint',
        'footer-link-faq': 'FAQ',
        'footer-contact-title': 'Contact Information',
        'footer-support-number': 'Support Number: 0559735137',
        'footer-support-email': 'support@makkahhealth.gov.sa',
        'footer-working-hours': 'Working Hours: 24/7',
        'footer-copyright': 'Â© 2025 Makkah Health Cluster â€“ All Rights Reserved'
      }
    };

    // Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„ØºØ©
    let currentLanguage = 'ar';

    // Ø¯Ø§Ù„Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ±Ø¬Ù…Ø©
    function applyTranslation(lang) {
      const elements = translations[lang];
      if (!elements) return;

      // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
      Object.keys(elements).forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.textContent = elements[id];
        }
      });

      // ØªØ·Ø¨ÙŠÙ‚ ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù€ placeholders
      const inputs = document.querySelectorAll('input[data-placeholder-ar], textarea[data-placeholder-ar]');
      inputs.forEach(input => {
        if (lang === 'en') {
          input.placeholder = input.getAttribute('data-placeholder-en');
        } else {
          input.placeholder = input.getAttribute('data-placeholder-ar');
        }
      });

      // ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Øµ
      if (lang === 'en') {
        document.documentElement.setAttribute('dir', 'ltr');
        document.documentElement.setAttribute('lang', 'en');
        // ØªØºÙŠÙŠØ± Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†ØµÙˆØµ
        document.querySelectorAll('main, section').forEach(el => {
          el.classList.remove('text-right');
          el.classList.add('text-left');
        });
      } else {
        document.documentElement.setAttribute('dir', 'rtl');
        document.documentElement.setAttribute('lang', 'ar');
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†ØµÙˆØµ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©
        document.querySelectorAll('main, section').forEach(el => {
          el.classList.remove('text-left');
          el.classList.add('text-right');
        });
      }

      currentLanguage = lang;
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', function() {
      // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø£Ùˆ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
      const savedLanguage = localStorage.getItem('selectedLanguage') || 'ar';
      applyTranslation(savedLanguage);
      
      // Ø±Ø¨Ø· Ø²Ø± Ø§Ù„Ù„ØºØ©
      const languageToggle = document.getElementById('languageToggle');
      if (languageToggle) {
        languageToggle.addEventListener('click', function() {
          const newLang = currentLanguage === 'ar' ? 'en' : 'ar';
          applyTranslation(newLang);
          localStorage.setItem('selectedLanguage', newLang);
        });
      }
    });
  </script>
</body>
</html>

