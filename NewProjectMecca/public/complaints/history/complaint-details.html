<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>ุชูุงุตูู ุงูุจูุงุบ</title>

  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <!-- Theme controller -->
  <script src="../../assets/js/theme.js"></script>

<script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../assets/css/styles.css" />
<link rel="stylesheet" href="../submit/submit-complaint.css">

  <style>
    /* ูุจุถ ุฎููู ููุฃููููุฉ ุงููุชูุณุทุฉ (ุฃุตูุฑ) */
    @keyframes pulse-yellow {
      0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.45); }
      70% { box-shadow: 0 0 0 8px rgba(245, 158, 11, 0); }
      100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
    }
    .prio-pulse { position: relative; }
    .prio-pulse .dot {
      display:inline-block;width:8px;height:8px;border-radius:9999px;
    }
    .prio-pulse--med .dot { background:#F59E0B; animation: pulse-yellow 1.6s infinite; }
  </style>
</head>
<body class="bg-gray-50" style="font-family:'Tajawal',sans-serif">
  <header id="navbar" class="fixed w-full top-0 z-50 navbar-scroll" style="background-color:#002B5B;">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <img src="../../assets/img/logo3.png" class="h-16 w-auto" alt="Logo">
        </div>
        <nav class="hidden md:flex items-center space-x-reverse space-x-8">
          <a href="../../../index/index.html" class="text-white hover:text-blue-200 transition-colors">ุงูุฑุฆูุณูุฉ</a>
          <a href="../../../dashboard/dashboard.html" class="text-white hover:text-blue-200 transition-colors">ููุญุฉ ุงูุชุญูู</a>
          <a href="complaints-history.html" class="text-white hover:text-blue-200 transition-colors">ุณุฌู ุงูุจูุงุบุงุช</a>
          <a href="../../../index/about-system.html" class="text-white hover:text-blue-200 transition-colors">ุญูู ุงููุธุงู</a>
          <a href="../../../index/help.html" class="text-white hover:text-blue-200 transition-colors">ุงููุณุงุนุฏุฉ</a>
          <a href="../../../index/contact.html" class="text-white hover:text-blue-200 transition-colors">ุงุชุตู ุจูุง</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 pt-16 pb-10">
    <!-- ุนููุงู ุงูุตูุญุฉ -->
    <section class="text-center pt-6">
      <h1 class="text-3xl md:text-4xl font-extrabold text-[#002B5B] mb-6">ุชูุงุตูู ุงูุจูุงุบ</h1>
      <a href="complaints-history.html" class="inline-block bg-gray-100 text-gray-700 px-4 py-1.5 rounded-full text-sm hover:bg-gray-200 transition">
        โต ุฑุฌูุน ููุณุฌู
      </a>
    </section>

    <!-- ููุฏุฑ ูุฎุชุตุฑ ููุชุนุฑูู -->
    <section id="headCard" class="bg-white rounded-2xl p-5 shadow-xl border border-gray-100 mt-8 mb-4">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div>
          <div class="text-xs text-gray-500">ุฑูู ุงูุจูุงุบ</div>
          <div id="dTicket" class="text-xl font-extrabold text-[#002B5B]">-</div>
        </div>
        <div class="flex gap-2 items-center">
          <span id="dStatusBadge" data-complaint-status></span>
          <span id="dPriorityBadge"></span>
        </div>
      </div>
      
      <!-- ุนุฏุงุฏ ูุฏุฉ ุงููุนุงูุฌุฉ -->
      <div id="processingDurationContainer" class="mt-4 pt-4 border-t border-gray-200" style="display: none;">
        <div class="flex items-center gap-2">
          <span class="text-sm font-semibold text-gray-700">๐ ุงููุฏุฉ ุงููุชุจููุฉ ููุนุงูุฌุฉ ุงูุจูุงุบ:</span>
          <span id="processingCountdown" class="text-lg font-bold text-blue-600">-</span>
        </div>
        <div id="processingDeadlineInfo" class="text-xs text-gray-500 mt-1"></div>
      </div>
    </section>

    <!-- ุดุฑูุท ุงูุฅุฌุฑุงุกุงุช -->
    <section id="actionsBar" class="bg-white rounded-2xl p-4 shadow-xl border border-gray-100 mb-4">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div class="text-sm text-gray-600">ุฅุฌุฑุงุกุงุช ุนูู ุงูุจูุงุบ</div>
        <div class="flex flex-wrap gap-2">
          <button id="btnReply" class="h-10 px-4 rounded-xl bg-[#0FA47A] text-white text-sm hover:bg-[#0c8f68] transition">ุฅุถุงูุฉ ุฑุฏ</button>
          <button id="btnChangeStatus" class="h-10 px-4 rounded-xl bg-amber-500 text-white text-sm hover:bg-amber-600 transition">ุชุบููุฑ ุงูุญุงูุฉ</button>
          <button id="btnChangePriority" class="h-10 px-4 rounded-xl bg-orange-600 text-white text-sm hover:bg-orange-700 transition">๐บ ุชุบููุฑ ุงูุฃููููุฉ</button>
          <button id="btnChangeDuration" class="h-10 px-4 rounded-xl bg-cyan-600 text-white text-sm hover:bg-cyan-700 transition">โณ ุชุบููุฑ ุงููุฏุฉ</button>
          <button id="btnTransfer" class="h-10 px-4 rounded-xl bg-indigo-600 text-white text-sm hover:bg-indigo-700 transition">ุชุญููู</button>
          <button id="btnDeleteComplaint" class="h-10 px-4 rounded-xl bg-rose-600 text-white text-sm hover:bg-rose-700 transition">๐๏ธ ุญุฐู ุงูุจูุงุบ</button>
        </div>
      </div>
    </section>

    <!-- ุชูุงุตูู ุฃุณุงุณูุฉ -->
    <section class="grid md:grid-cols-2 gap-4 mb-4">
      <div class="card">
        <div class="section-title"><span class="icon">๐ค</span><h2>ุจูุงูุงุช ุงููุฑุงุฌุน</h2></div>
        <div class="grid sm:grid-cols-2 gap-3 text-[15px] text-gray-700">
          <div><span class="font-semibold text-gray-800">ุงูุงุณู:</span> <span id="dName">-</span></div>
          <div><span class="font-semibold text-gray-800">ุงูุฌูุงู:</span> <span id="dMobile">-</span></div>
          <div><span class="font-semibold text-gray-800">ุฑูู ุงูููู:</span> <span id="dFile">-</span></div>
          <div><span class="font-semibold text-gray-800">ุงููุณุชุดูู:</span> <span id="uiHospitalName">-</span></div>
        </div>
      </div>

      <div class="card">
        <div class="section-title"><span class="icon">๐๏ธ</span><h2>ูุนูููุงุช ุงูุจูุงุบ</h2></div>
        <div class="grid sm:grid-cols-2 gap-3 text-[15px] text-gray-700">
          <div><span class="font-semibold text-gray-800">ุงูุชุตููู:</span> <span id="dType">-</span></div>
          <div><span class="font-semibold text-gray-800">ุงููุณู:</span> <span id="uiDepartmentName">-</span></div>
          <div><span class="font-semibold text-gray-800">ุงููุณู ุงููุฑุนู:</span> <span id="uiSubDepartmentName">-</span></div>
          <div><span class="font-semibold text-gray-800">ุชุงุฑูุฎ ุงูุฒูุงุฑุฉ:</span> <span id="dVisitDate">โ</span></div>
          <div><span class="font-semibold text-gray-800">ุชุงุฑูุฎ ุงูุฅูุดุงุก:</span> <span id="dCreated">-</span></div>
          <div><span class="font-semibold text-gray-800">ุขุฎุฑ ุชุญุฏูุซ:</span> <span id="dUpdated">-</span></div>
        </div>
        
        <!-- ูุตู ุงูุจูุงุบ -->
        <div class="mt-4 pt-4 border-t border-gray-200">
          <div class="text-[15px] text-gray-700">
            <span class="font-semibold text-gray-800 block mb-2">ูุตู ุงูุจูุงุบ:</span>
            <div id="dDescription" class="bg-gray-50 rounded-lg p-3 text-gray-800 leading-relaxed min-h-[80px]">
              -
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ุจูุงูุงุช ุงูููุธู ุงูููุจููุบ ุนููู -->
    <section id="targetSection" class="card mt-4" style="display:none;">
      <div class="section-title">
        <span class="icon">๐ฅ</span>
        <h2>ุจูุงูุงุช ุงูููุธู ุงูููุจููุบ ุนููู</h2>
      </div>
      
      <div class="grid sm:grid-cols-2 gap-3 text-[15px] text-gray-700">
        <div><span class="font-semibold text-gray-800">ุงุณู ุงูููุธู:</span> <span id="targetEmployeeName">โ</span></div>
        <div><span class="font-semibold text-gray-800">ุฑูู ุงูููุธู:</span> <span id="targetEmployeeID">โ</span></div>
        <div><span class="font-semibold text-gray-800">ุงุณู ุงููุณู:</span> <span id="targetDepartmentName">โ</span></div>
        <div><span class="font-semibold text-gray-800">ุฑูู ุงููุณู:</span> <span id="targetDepartmentID">โ</span></div>
      </div>
    </section>

    <!-- ุฎุท ุฒููู ูุจุณูุท + ูุฑููุงุช (ูุงุฌูุงุช ููุท) -->
    <section class="grid md:grid-cols-3 gap-4">
      <div class="md:col-span-2 card">
        <div class="section-title"><span class="icon">๐</span><h2>ุชุชุจุน ุงูุญุงูุฉ</h2></div>
        <div class="mb-3 text-sm text-gray-600">
          <small>ุชู ุฅูุดุงุก ุงูุจูุงุบ ุจูุงุณุทุฉ: <strong id="uiCreatedByName">โ</strong></small>
          <br>
          <small>ุงูููุธู ุงูููุณูุฏ ุฅููู: <strong id="uiAssignedToName">โ</strong></small>
        </div>
        <ul id="dTimeline" class="space-y-3 text-gray-700 text-[15px]">
          <!-- ููููุฃ ูู JS -->
        </ul>
      </div>

      <div class="card">
        <div class="section-title"><span class="icon">๐</span><h2>ุงููุฑููุงุช</h2></div>
        <div id="dAttachments" class="text-gray-600 text-sm">ูุง ุชูุฌุฏ ูุฑููุงุช.</div>
      </div>
    </section>

    <!-- ูุงุฆูุฉ ุงูุฑุฏูุฏ -->
    <section class="card mt-4">
      <div class="section-title">
        <span class="icon">๐ฌ</span>
        <h2>ุงูุฑุฏูุฏ ุนูู ุงูุจูุงุบ</h2>
      </div>
      
      <div id="repliesList" class="space-y-4 mt-4">
        <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู ูู JavaScript -->
        <div class="text-center text-gray-500 py-8">
          <div class="text-lg mb-2">๐ฌ</div>
          <div>ูุง ุชูุฌุฏ ุฑุฏูุฏ ุจุนุฏ</div>
          <div class="text-sm mt-1">ูู ุฃูู ูู ูุฑุฏ ุนูู ูุฐุง ุงูุจูุงุบ</div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer - ุงูุชุฐููู -->
  <footer class="bg-gray-900 text-white py-14">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-8">
        <!-- Column 1 - ุงูุนููุฏ ุงูุฃูู -->
        <div>
          <div class="flex items-center space-x-reverse space-x-3 mb-4">
            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
              <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
              </svg>
            </div>
            <div>
              <div class="font-bold">ุชุฌูุน ููุฉ ุงูุตุญู</div>
              <div class="text-sm text-gray-300">ูุธุงู ุงูุจูุงุบุงุช</div>
            </div>
          </div>
          <p class="text-gray-300 text-sm">ููุตุฉ ุฑุณููุฉ ูุชูุฏูู ููุชุงุจุนุฉ ุงูุจูุงุบุงุช</p>
        </div>

        <!-- Column 2 - ุงูุนููุฏ ุงูุซุงูู -->
        <div>
          <h3 class="font-bold mb-4">ุฑูุงุจุท ุณุฑูุนุฉ</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="../../../index/index.html" class="text-gray-300 hover:text-white hover:underline transition-colors">ุงูุฑุฆูุณูุฉ</a></li>
            <li><a href="../submit/submit-complaint.html" class="text-gray-300 hover:text-white hover:underline transition-colors">ุชูุฏูู ุจูุงุบ</a></li>
            <li><a href="../track/track-complaint.html" class="text-gray-300 hover:text-white hover:underline transition-colors">ูุชุงุจุนุฉ ุจูุงุบ</a></li>
            <li><a href="../../../index/help.html" class="text-gray-300 hover:text-white hover:underline transition-colors">ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ</a></li>
          </ul>
        </div>

        <!-- Column 3 - ุงูุนููุฏ ุงูุซุงูุซ -->
        <div>
          <h3 class="font-bold mb-4">ูุนูููุงุช ุงูุชูุงุตู</h3>
          <div class="space-y-2 text-sm text-gray-300">
            <div class="flex items-baseline">
              <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              <span>ุฑูู ุงูุฏุนู: 0559735137</span>
            </div>
            <div class="flex items-baseline">
              <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              <span>support@makkahhealth.gov.sa</span>
            </div>
            <div class="flex items-baseline">
              <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <span>ุณุงุนุงุช ุงูุนูู: 24/7</span>
            </div>
          </div>
        </div>
      </div>

      <div class="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-300">
        ยฉ 2025 ุชุฌูุน ููุฉ ุงูููุฑูุฉ ุงูุตุญู โ ุฌููุน ุงูุญููู ูุญููุธุฉ
      </div>
    </div>
  </footer>

  <!-- Overlay ูุดุชุฑู -->
  <div id="modalOverlay" class="fixed inset-0 bg-black/40 hidden z-40"></div>

  <!-- ุฅุถุงูุฉ ุฑุฏ -->
  <div id="replyModal" class="fixed inset-0 z-50 hidden place-items-center">
    <div class="bg-white w-[90%] max-w-2xl rounded-2xl shadow-2xl border border-gray-100 p-5">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-lg font-bold text-[#002B5B]">ุฅุถุงูุฉ ุฑุฏ ุนูู ุงูุจูุงุบ</h3>
        <button data-close-modal class="text-gray-500 hover:text-gray-700">โ</button>
      </div>
      <div class="grid gap-3">
        <div>
          <label class="block text-sm text-gray-600 mb-1">ููุน ุงูุฑุฏ</label>
          <select id="replyType" class="w-full h-10 rounded-xl border border-gray-200 px-3 focus:ring-2 focus:ring-blue-200">
            <option value="">ุงุฎุชุฑ ููุน ุงูุฑุฏ</option>
            <option value="update">ุชุญุฏูุซ ุงูุญุงูุฉ</option>
            <option value="followup">ูุชุงุจุนุฉ</option>
            <option value="resolution">ุญู ุงููุดููุฉ</option>
            <option value="information">ูุนูููุงุช ุฅุถุงููุฉ</option>
            <option value="request">ุทูุจ ุชูุถูุญ</option>
            <option value="escalation">ุชุตุนูุฏ</option>
          </select>
        </div>
        <div>
          <label class="block text-sm text-gray-600 mb-1">ูุต ุงูุฑุฏ</label>
          <textarea id="replyText" rows="4" class="w-full rounded-xl border border-gray-200 px-3 py-2 focus:ring-2 focus:ring-blue-200"></textarea>
        </div>
        <div>
          <label class="block text-sm text-gray-600 mb-1">ูุฑููุงุช (ุงุฎุชูุงุฑู)</label>
          <input id="replyFiles" type="file" multiple class="w-full text-sm">
        </div>
      </div>
      <div class="mt-4 flex justify-end gap-2">
        <button data-close-modal class="h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm">ุฅูุบุงุก</button>
        <button id="saveReply" class="h-10 px-4 rounded-xl bg-[#0FA47A] text-white text-sm">ุญูุธ ุงูุฑุฏ</button>
      </div>
    </div>
  </div>

  <!-- โ ุชู ุฅูุบุงุก ุงูููุฏุงู ุงููุฏูู (ูุงุฌูุฉ ููุท) - ุงุณุชูุจุฏู ุจู #changeStatusModal ุงููุชุตู ุจู API -->
  <!--
  <div id="statusModal" class="fixed inset-0 z-50 hidden place-items-center">
    <div class="bg-white w-[90%] max-w-md rounded-2xl shadow-2xl border border-gray-100 p-5">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-lg font-bold text-[#002B5B]">ุชุบููุฑ ุญุงูุฉ ุงูุจูุงุบ</h3>
        <button data-close-modal class="text-gray-500 hover:text-gray-700">โ</button>
      </div>
      <div class="grid gap-3">
        <div>
          <label class="block text-sm text-gray-600 mb-1">ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ</label>
          <select id="newStatus" class="w-full h-10 rounded-xl border border-gray-200 px-2 focus:ring-2 focus:ring-blue-200">
            <option value="OPEN">ููุชูุญุฉ</option>
            <option value="IN_PROGRESS">ููุฏ ุงููุนุงูุฌุฉ</option>
            <option value="CLOSED">ูุบููุฉ</option>
            <option value="CRITICAL">ุญุฑุฌุฉ</option>
          </select>
        </div>
        <div>
          <label class="block text-sm text-gray-600 mb-1">ููุงุญุธุฉ (ุงุฎุชูุงุฑู)</label>
          <textarea id="statusNote" rows="3" class="w-full rounded-xl border border-gray-200 px-3 py-2 focus:ring-2 focus:ring-blue-200"></textarea>
        </div>
      </div>
      <div class="mt-4 flex justify-end gap-2">
        <button data-close-modal class="h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm">ุฅูุบุงุก</button>
        <button id="applyStatus" class="h-10 px-4 rounded-xl bg-amber-500 text-white text-sm">ุชุทุจูู</button>
      </div>
    </div>
  </div>
  -->

  <!-- ุชุญููู ุจูู ุงููุณุชุดููุงุช ูุงูุฃูุณุงู -->
  <div id="transferModal" class="fixed inset-0 z-50 hidden place-items-center">
    <div class="bg-white w-[90%] max-w-2xl rounded-2xl shadow-2xl border border-gray-100 p-5">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-bold text-[#002B5B]">ุชุญููู ุงูุจูุงุบ</h3>
        <button data-close-modal class="text-gray-500 hover:text-gray-700">โ</button>
      </div>

      <!-- ุชุจููุจุงุช ุงูุชุญููู -->
      <div class="flex flex-wrap gap-2 mb-4">
        <button id="tabDeptBtn"
                class="tab-btn h-10 px-4 rounded-xl bg-indigo-600 text-white text-sm"
                data-tab="dept" aria-selected="true">ุชุญููู ุจูู ุงูุฃูุณุงู</button>
        <button id="tabEmpBtn"
                class="tab-btn h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm"
                data-tab="emp" aria-selected="false">ุชุญููู ุจูู ุงูููุธููู</button>
        <button id="tabHospBtn"
                class="tab-btn h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm"
                data-tab="hosp" aria-selected="false">ุชุญููู ุจูู ุงููุณุชุดููุงุช</button>
      </div>

      <!-- ููุญุฉ: ุชุญููู ุจูู ุงููุณุชุดููุงุช -->
      <div id="pane-hosp" class="grid md:grid-cols-2 gap-3 hidden">
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-600 mb-1">ุงููุณุชุดูู</label>
          <select id="transferHospital" class="w-full h-10 rounded-xl border border-gray-200 px-2 focus:ring-2 focus:ring-blue-200"></select>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-600 mb-1">ููุงุญุธุฉ ุงูุชุญููู (ุงุฎุชูุงุฑู)</label>
          <textarea id="transferNote" rows="3" class="w-full rounded-xl border border-gray-200 px-3 py-2 focus:ring-2 focus:ring-blue-200"></textarea>
        </div>
      </div>

      <!-- ููุญุฉ: ุชุญููู ุจูู ุงูุฃูุณุงู -->
      <div id="pane-dept" class="grid md:grid-cols-2 gap-3">
        <div>
          <label class="block text-sm text-gray-600 mb-1">ุงููุณู ุงูุญุงูู</label>
          <div id="transferDepartmentCurrent" class="w-full h-10 rounded-xl border border-gray-200 px-3 py-2 bg-gray-50 text-gray-700 flex items-center">
            ุฌุงุฑู ุงูุชุญููู...
          </div>
          <!-- ุนูุตุฑ ูุฎูู ูุชุฎุฒูู ุงููุณู ุงูุญุงูู -->
          <select id="deptFrom" class="hidden"></select>
        </div>
        <div>
          <label class="block text-sm text-gray-600 mb-1">ุงููุณู ุงููุฏู</label>
          <select id="deptTo" class="w-full h-10 rounded-xl border border-gray-200 px-2"></select>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-600 mb-1">ููุงุญุธุฉ (ุงุฎุชูุงุฑู)</label>
          <textarea id="deptNote" rows="3" class="w-full rounded-xl border border-gray-200 px-3 py-2 focus:ring-2 focus:ring-blue-200"></textarea>
        </div>
      </div>

      <!-- ููุญุฉ: ุชุญููู ุจูู ุงูููุธููู -->
      <div id="pane-emp" class="grid md:grid-cols-2 gap-3 hidden">
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-600 mb-1">ุงููุณู</label>
          <select id="empDept" class="w-full h-10 rounded-xl border border-gray-200 px-2"></select>
        </div>
        <div>
          <label class="block text-sm text-gray-600 mb-1">ุงูููุธู ุงูุญุงูู</label>
          <select id="empFrom" class="w-full h-10 rounded-xl border border-gray-200 px-2"></select>
        </div>
        <div>
          <label class="block text-sm text-gray-600 mb-1">ุงูููุธู ุงููุฏู</label>
          <select id="empTo" class="w-full h-10 rounded-xl border border-gray-200 px-2"></select>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm text-gray-600 mb-1">ููุงุญุธุฉ (ุงุฎุชูุงุฑู)</label>
          <textarea id="empNote" rows="3" class="w-full rounded-xl border border-gray-200 px-3 py-2 focus:ring-2 focus:ring-blue-200"></textarea>
        </div>
      </div>

      <div class="mt-5 flex justify-end gap-2">
        <button data-close-modal class="h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm">ุฅูุบุงุก</button>
        <button id="confirmTransfer" class="h-10 px-4 rounded-xl bg-indigo-600 text-white text-sm">ุชุญููู</button>
      </div>
    </div>
  </div>

  <!-- ๐ ููุฏุงู ุชุบููุฑ ุญุงูุฉ ุงูุจูุงุบ -->
  <div id="changeStatusModal" class="modal hidden fixed inset-0 z-[9999] overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 p-6 relative">
      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-[#002B5B]">ุชุบููุฑ ุญุงูุฉ ุงูุจูุงุบ</h3>
        <button data-close-modal class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
      </div>

      <!-- Body -->
      <div class="space-y-4">
        <div>
          <label for="statusSelect" class="block text-sm font-medium text-gray-700 mb-2">ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ</label>
          <select id="statusSelect" class="w-full rounded-xl border border-gray-200 px-3 py-2.5 focus:ring-2 focus:ring-blue-200 focus:border-transparent">
            <option value="">ุฌุงุฑู ุงูุชุญููู...</option>
          </select>
        </div>

        <div>
          <label for="statusNote" class="block text-sm font-medium text-gray-700 mb-2">ููุงุญุธุฉ (ุงุฎุชูุงุฑู)</label>
          <textarea id="statusNote" rows="3" class="w-full rounded-xl border border-gray-200 px-3 py-2 focus:ring-2 focus:ring-blue-200 focus:border-transparent" placeholder="ุฃุถู ููุงุญุธุฉ ุญูู ุณุจุจ ุชุบููุฑ ุงูุญุงูุฉ..."></textarea>
        </div>
      </div>

      <!-- Footer -->
      <div class="mt-6 flex justify-end gap-2">
        <button data-close-modal class="h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm hover:bg-gray-200">ุฅูุบุงุก</button>
        <button id="applyStatusBtn" class="h-10 px-5 rounded-xl bg-blue-600 text-white text-sm font-medium hover:bg-blue-700">ุชุทุจูู</button>
      </div>
    </div>
  </div>

  <!-- ๐บ ููุฏุงู ุชุบููุฑ ุงูุฃููููุฉ -->
  <div id="changePriorityModal" class="modal hidden fixed inset-0 z-[9999] overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 p-6 relative">
      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-[#002B5B]">๐บ ุชุบููุฑ ุงูุฃููููุฉ</h3>
        <button data-close-modal class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
      </div>

      <!-- Body -->
      <div class="space-y-4">
        <p class="text-sm text-gray-600 mb-4">ุงุฎุชุฑ ุงูุฃููููุฉ ุงูุฌุฏูุฏุฉ ููุจูุงุบ:</p>
        
        <div class="grid gap-3">
          <!-- ุญุฑุฌุฉ -->
          <button 
            data-priority="URGENT" 
            class="priority-option h-14 px-4 rounded-xl border-2 border-red-200 bg-red-50 hover:bg-red-100 hover:border-red-400 transition flex items-center justify-between group"
          >
            <div class="flex items-center gap-3">
              <span class="text-2xl">๐ด</span>
              <div class="text-right">
                <div class="font-bold text-red-700">ุญุฑุฌุฉ</div>
                <div class="text-xs text-red-600">URGENT</div>
              </div>
            </div>
            <span class="text-red-600 opacity-0 group-hover:opacity-100 transition">โ</span>
          </button>

          <!-- ูุชูุณุทุฉ -->
          <button 
            data-priority="MEDIUM" 
            class="priority-option h-14 px-4 rounded-xl border-2 border-yellow-200 bg-yellow-50 hover:bg-yellow-100 hover:border-yellow-400 transition flex items-center justify-between group"
          >
            <div class="flex items-center gap-3">
              <span class="text-2xl">๐</span>
              <div class="text-right">
                <div class="font-bold text-yellow-700">ูุชูุณุทุฉ</div>
                <div class="text-xs text-yellow-600">MEDIUM</div>
              </div>
            </div>
            <span class="text-yellow-600 opacity-0 group-hover:opacity-100 transition">โ</span>
          </button>

          <!-- ููุฎูุถุฉ -->
          <button 
            data-priority="LOW" 
            class="priority-option h-14 px-4 rounded-xl border-2 border-green-200 bg-green-50 hover:bg-green-100 hover:border-green-400 transition flex items-center justify-between group"
          >
            <div class="flex items-center gap-3">
              <span class="text-2xl">๐ข</span>
              <div class="text-right">
                <div class="font-bold text-green-700">ููุฎูุถุฉ</div>
                <div class="text-xs text-green-600">LOW</div>
              </div>
            </div>
            <span class="text-green-600 opacity-0 group-hover:opacity-100 transition">โ</span>
          </button>
        </div>
      </div>

      <!-- Footer -->
      <div class="mt-6 flex justify-end gap-2">
        <button data-close-modal class="h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm hover:bg-gray-200">ุฅูุบุงุก</button>
      </div>
    </div>
  </div>

  <!-- ๐๏ธ ููุฏุงู ุชุฃููุฏ ุญุฐู ุงูุจูุงุบ -->
  <div id="deleteModal" class="modal hidden fixed inset-0 z-[9999] overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 p-6 relative">
      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-rose-600">โ๏ธ ุชุฃููุฏ ุญุฐู ุงูุจูุงุบ</h3>
        <button id="cancelDelete" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
      </div>

      <!-- Body -->
      <div class="space-y-4">
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
          <p class="text-sm text-gray-700">ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุจูุงุบุ</p>
          <p class="text-sm text-gray-600 mt-2">ุณููุชูู ุงูุจูุงุบ ุฅูู ุณูุฉ ุงููุญุฐููุงุช ููููู ุงุณุชุฑุฌุงุนู ูุงุญูุงู.</p>
        </div>

        <div>
          <label for="deleteReason" class="block text-sm font-medium text-gray-700 mb-2">ุณุจุจ ุงูุญุฐู (ุงุฎุชูุงุฑู)</label>
          <input id="deleteReason" type="text" class="w-full rounded-xl border border-gray-200 px-3 py-2.5 focus:ring-2 focus:ring-rose-200 focus:border-transparent" placeholder="ูุซุงู: ุชูุฑุงุฑ / ุจูุงุบ ุจุงูุฎุทุฃ / ุฎุงุฑุฌ ุงูุตูุงุญูุฉ">
        </div>
      </div>

      <!-- Footer -->
      <div class="mt-6 flex justify-end gap-2">
        <button id="cancelDeleteBtn" class="h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm hover:bg-gray-200">ุฅูุบุงุก</button>
        <button id="confirmDelete" class="h-10 px-5 rounded-xl bg-rose-600 text-white text-sm font-medium hover:bg-rose-700">ุญุฐู ุงูุจูุงุบ</button>
      </div>
    </div>
  </div>

  <!-- โณ ููุฏุงู ุชุบููุฑ ุงููุฏุฉ -->
  <div id="changeDurationModal" class="modal hidden fixed inset-0 z-[9999] overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 p-6 relative">
      <!-- Header -->
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-[#002B5B]">โณ ุชุบููุฑ ูุฏุฉ ุงููุนุงูุฌุฉ</h3>
        <button data-close-modal class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
      </div>

      <!-- Body -->
      <div class="space-y-4">
        <div>
          <label for="newDuration" class="block text-sm font-medium text-gray-700 mb-2">ุงุฎุชุฑ ุงููุฏุฉ ุงูุฌุฏูุฏุฉ</label>
          <select id="newDuration" class="w-full rounded-xl border border-gray-200 px-3 py-2.5 focus:ring-2 focus:ring-blue-200 focus:border-transparent">
            <option value="">ุงุฎุชุฑ ุงููุฏุฉ</option>
            <option value="6">6 ุณุงุนุงุช</option>
            <option value="12">12 ุณุงุนุฉ</option>
            <option value="24">ููู ูุงุญุฏ</option>
            <option value="48">ูููุงู</option>
            <option value="72">3 ุฃูุงู</option>
            <option value="120">5 ุฃูุงู</option>
          </select>
        </div>
        <div>
          <label for="durationNote" class="block text-sm font-medium text-gray-700 mb-2">ููุงุญุธุฉ (ุงุฎุชูุงุฑู)</label>
          <textarea id="durationNote" rows="3" class="w-full rounded-xl border border-gray-200 px-3 py-2 focus:ring-2 focus:ring-blue-200 focus:border-transparent" placeholder="ุฃุถู ุณุจุจ ุชุบููุฑ ุงููุฏุฉ..."></textarea>
        </div>
      </div>

      <!-- Footer -->
      <div class="mt-6 flex justify-end gap-2">
        <button data-close-modal class="h-10 px-4 rounded-xl bg-gray-100 text-gray-700 text-sm hover:bg-gray-200">ุฅูุบุงุก</button>
        <button id="applyDurationBtn" class="h-10 px-5 rounded-xl bg-cyan-600 text-white text-sm font-medium hover:bg-cyan-700">ุชุทุจูู</button>
      </div>
    </div>
  </div>

  <!-- ูุธุงู ุญูุงูุฉ ุงูุตูุญุงุช - ูุฌุจ ุชุญูููู ุฃููุงู -->
  <script src="../../assets/js/auth-check.js"></script>
  
  <script src="complaint-details.js"></script>
</body>
</html>

